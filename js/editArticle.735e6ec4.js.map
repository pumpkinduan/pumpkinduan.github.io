{"version":3,"sources":["webpack:///./src/views/article/editArticle.vue?c866","webpack:///./src/views/article/editArticle.vue?ef21","webpack:///src/views/article/editArticle.vue","webpack:///./src/views/article/editArticle.vue?19df","webpack:///./src/views/article/editArticle.vue?fb72"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","labels","tableData","on","handleSumbit","resetDialog","staticRenderFns","name","components","Publish","data","file","flag","edit","title","tag","description","author","beforeRouteEnter","article","next","i","vm","btnText","res","$refs","quillEditor","quill","root","innerHTML","beforeRouteLeave","sessionStorage","clear","methods","submitSuccess","$message","message","msg","duration","$router","push","component"],"mappings":"+GAAA,yBAAyf,EAAG,G,gECA5f,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,UAAU,CAACG,IAAI,OAAOC,MAAM,CAAC,OAASR,EAAIS,OAAO,MAAO,EAAK,UAAYT,EAAIU,UAAU,MAAQ,OAAO,QAAU,QAAQC,GAAG,CAAC,aAAeX,EAAIY,aAAa,YAAcZ,EAAIa,gBAAgB,IACpUC,EAAkB,G,oCCiBtB,GACEC,KAAM,cACNC,WAAY,CACVC,QAAJ,QAEEC,KALF,WAMI,MAAO,CACLC,KAAM,GACNC,MAAM,EACNC,MAAM,EACNC,MAAO,OACPb,OAAQ,CACNc,IAAK,KACLD,MAAO,KACPE,YAAa,KACbC,OAAQ,MAEVf,UAAW,CACjB,CACQ,IAAR,GACQ,MAAR,GACQ,YAAR,GACQ,OAAR,OAKEgB,iBA3BF,SA2BA,OACI,IAAJ,mBACQC,GAEFC,GAAK,SAAX,GAIQ,IAAK,IAAIC,KAHTC,EAAGR,MAAQ,OACXQ,EAAGC,QAAU,OACbD,EAAGT,MAAO,EACIS,EAAGpB,UAAU,GACzBoB,EAAGpB,UAAU,GAAGmB,GAAKF,EAAQE,GAE/B,EAAR,sDAEcG,EAAId,MAAQc,EAAId,KAAKA,OACvBY,EAAGG,MAAMZ,KAAKY,MAAMC,YAAYC,MAAMC,KAAKC,UACvD,4BAOEC,iBAjDF,SAiDA,OAEIC,eAAeC,QACfZ,KAEFa,QAAS,CACP7B,aADJ,SACA,cACM,EAAN,KACA,uDACA,kBACA,SACU,EAAV,sBACU,EAAV,wBACY,MAAZ,QACY,OAAZ,aAIA,wBAII8B,cAjBJ,SAiBA,GACMH,eAAeC,QACfvC,KAAKgC,MAAMZ,KAAKY,MAAMC,YAAYC,MAAMC,KAAKC,UAAY,GACzDpC,KAAKY,cACLZ,KAAK0C,SAAS,CACZC,QAAS1B,EAAK2B,IACdC,SAAU,MAEZ7C,KAAK8C,QAAQC,KAAK,CAAxB,sBAEInC,YA3BJ,WA4BM,IAAK,IAAIgB,KAAK5B,KAAKS,UAAU,GAC3BT,KAAKS,UAAU,GAAGmB,GAAK,MCrGqU,I,wBCQhWoB,EAAY,eACd,EACAlD,EACAe,GACA,EACA,KACA,WACA,MAIa,aAAAmC,E","file":"js/editArticle.735e6ec4.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./editArticle.vue?vue&type=style&index=0&id=3dd08240&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./editArticle.vue?vue&type=style&index=0&id=3dd08240&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"edit-article\"},[_c('Publish',{ref:\"edit\",attrs:{\"labels\":_vm.labels,\"edit\":true,\"tableData\":_vm.tableData,\"title\":\"编辑文章\",\"btnText\":\"开始编辑\"},on:{\"handleSumbit\":_vm.handleSumbit,\"resetDialog\":_vm.resetDialog}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"edit-article\">\r\n    <Publish\r\n      ref=\"edit\"\r\n      :labels=\"labels\"\r\n      :edit=\"true\"\r\n      :tableData=\"tableData\"\r\n      @handleSumbit=\"handleSumbit\"\r\n      @resetDialog=\"resetDialog\"\r\n      title=\"编辑文章\"\r\n      btnText=\"开始编辑\"\r\n    ></Publish>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Publish from '@/components/Publish';\r\nimport api from '@/api/article.js';\r\nimport timeline from '@/api/timeline.js';\r\nexport default {\r\n  name: 'EditArticle',\r\n  components: {\r\n    Publish\r\n  },\r\n  data() {\r\n    return {\r\n      file: '',\r\n      flag: true,\r\n      edit: false,\r\n      title: '发布文章',\r\n      labels: {\r\n        tag: '标签',\r\n        title: '标题',\r\n        description: '描述',\r\n        author: '作者'\r\n      },\r\n      tableData: [\r\n        {\r\n          tag: '',\r\n          title: '',\r\n          description: '',\r\n          author: ''\r\n        }\r\n      ]\r\n    };\r\n  },\r\n  beforeRouteEnter(to, from, next) {\r\n    const article = to.params.article;\r\n    if (article) {\r\n      //代表编辑文章\r\n      next(vm => {\r\n        vm.title = '编辑文章';\r\n        vm.btnText = '开始编辑';\r\n        vm.edit = true;\r\n        for (var i in vm.tableData[0]) {\r\n          vm.tableData[0][i] = article[i];\r\n        }\r\n        api.getArticleDetail(article.article_id).then(res => {\r\n          //获取文章详情内容，进行编辑\r\n          if (res.data && res.data.data) {\r\n            vm.$refs.edit.$refs.quillEditor.quill.root.innerHTML =\r\n              res.data.data.content;\r\n            //显示文章内容\r\n          }\r\n        });\r\n      });\r\n    }\r\n  },\r\n  beforeRouteLeave(to, from, next) {\r\n    //从编辑文章路由到发布文章时，清空编辑文章时所缓存的文章信息\r\n    sessionStorage.clear();\r\n    next();\r\n  },\r\n  methods: {\r\n    handleSumbit(data) {\r\n      api\r\n        .updateArticle(data, this.$route.params.article.article_id)\r\n        .then(res => {\r\n          if (res.data) {\r\n            this.submitSuccess(res.data);\r\n            timeline.createOneTimeline({\r\n              title: data.title,\r\n              status: '更新文章'\r\n            })\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    submitSuccess(data) {\r\n      sessionStorage.clear();\r\n      this.$refs.edit.$refs.quillEditor.quill.root.innerHTML = ''; //清空编辑器;\r\n      this.resetDialog();\r\n      this.$message({\r\n        message: data.msg,\r\n        duration: 1000\r\n      });\r\n      this.$router.push({ name: 'ArticleList' });\r\n    },\r\n    resetDialog() {\r\n      for (var i in this.tableData[0]) {\r\n        this.tableData[0][i] = '';\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.edit-article {\r\n  height: 100%;\r\n}\r\n.wrapper {\r\n  margin-top: 25px;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./editArticle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./editArticle.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./editArticle.vue?vue&type=template&id=3dd08240&scoped=true&\"\nimport script from \"./editArticle.vue?vue&type=script&lang=js&\"\nexport * from \"./editArticle.vue?vue&type=script&lang=js&\"\nimport style0 from \"./editArticle.vue?vue&type=style&index=0&id=3dd08240&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3dd08240\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}